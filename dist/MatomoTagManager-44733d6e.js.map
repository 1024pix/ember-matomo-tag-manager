{"version":3,"file":"MatomoTagManager-44733d6e.js","sources":["../src/metrics-adapters/MatomoTagManager.js"],"sourcesContent":["import { assert } from '@ember/debug';\n\nexport default class MatomoTagManager {\n  metrics = null;\n  config = null;\n\n  constructor(config) {\n    this.config = config;\n  }\n\n  toStringExtension() {\n    return 'MatomoTagManager';\n  }\n\n  install() {\n    const { matomoUrl } = this.config;\n\n    assert(\n      `[ember-matomo-tag-manager] You must pass a \\`matomoUrl\\` to the ${this.toString()} adapter`,\n      matomoUrl,\n    );\n\n    this._injectScript(matomoUrl);\n  }\n\n  // prettier-ignore\n  _injectScript(matomoUrl) {\n    window._mtm = window._mtm || [];\n    window._mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});\n    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n    g.type='text/javascript'; g.async=true; g.src=`${matomoUrl}`; s.parentNode.insertBefore(g,s);\n    g.id='matomo-tag-manager'\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  identify(options = {}) {\n    throw new Error('Not implemented yet');\n  }\n\n  add(options = {}) {\n    window._mtm.push(options);\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  trackPage(options = {}) {\n    throw new Error('Not implemented yet');\n  }\n\n  uninstall() {\n    document\n      .querySelectorAll(`script[id=\"matomo-tag-manager\"]`)\n      .forEach((el) => {\n        el.parentElement?.removeChild(el);\n      });\n\n    delete window._mtm;\n  }\n}\n"],"names":["MatomoTagManager","constructor","config","_defineProperty","toStringExtension","install","matomoUrl","assert","toString","_injectScript","window","_mtm","push","Date","getTime","d","document","g","createElement","s","getElementsByTagName","type","async","src","parentNode","insertBefore","id","identify","options","Error","add","trackPage","uninstall","querySelectorAll","forEach","el","parentElement","removeChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEe,MAAMA,gBAAgB,CAAC;EAIpCC,WAAWA,CAACC,MAAM,EAAE;AAAAC,IAAAA,eAAA,kBAHV,IAAI,CAAA,CAAA;AAAAA,IAAAA,eAAA,iBACL,IAAI,CAAA,CAAA;IAGX,IAAI,CAACD,MAAM,GAAGA,MAAM,CAAA;AACtB,GAAA;AAEAE,EAAAA,iBAAiBA,GAAG;AAClB,IAAA,OAAO,kBAAkB,CAAA;AAC3B,GAAA;AAEAC,EAAAA,OAAOA,GAAG;IACR,MAAM;AAAEC,MAAAA,SAAAA;KAAW,GAAG,IAAI,CAACJ,MAAM,CAAA;IAEjCK,MAAM,CACH,CAAkE,gEAAA,EAAA,IAAI,CAACC,QAAQ,EAAG,CAAA,QAAA,CAAS,EAC5FF,SACF,CAAC,CAAA;AAED,IAAA,IAAI,CAACG,aAAa,CAACH,SAAS,CAAC,CAAA;AAC/B,GAAA;;AAEA;EACAG,aAAaA,CAACH,SAAS,EAAE;AACvBI,IAAAA,MAAM,CAACC,IAAI,GAAGD,MAAM,CAACC,IAAI,IAAI,EAAE,CAAA;AAC/BD,IAAAA,MAAM,CAACC,IAAI,CAACC,IAAI,CAAC;MAAC,eAAe,EAAG,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAG;AAAE,MAAA,OAAO,EAAE,WAAA;AAAW,KAAC,CAAC,CAAA;IACjF,IAAIC,CAAC,GAACC,QAAQ;AAAEC,MAAAA,CAAC,GAACF,CAAC,CAACG,aAAa,CAAC,QAAQ,CAAC;MAAEC,CAAC,GAACJ,CAAC,CAACK,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;IAClFH,CAAC,CAACI,IAAI,GAAC,iBAAiB,CAAA;IAAEJ,CAAC,CAACK,KAAK,GAAC,IAAI,CAAA;AAAEL,IAAAA,CAAC,CAACM,GAAG,GAAE,CAAA,EAAEjB,SAAU,CAAC,CAAA,CAAA;IAAEa,CAAC,CAACK,UAAU,CAACC,YAAY,CAACR,CAAC,EAACE,CAAC,CAAC,CAAA;IAC5FF,CAAC,CAACS,EAAE,GAAC,oBAAoB,CAAA;AAC3B,GAAA;;AAEA;AACAC,EAAAA,QAAQA,CAACC,OAAO,GAAG,EAAE,EAAE;AACrB,IAAA,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC,CAAA;AACxC,GAAA;AAEAC,EAAAA,GAAGA,CAACF,OAAO,GAAG,EAAE,EAAE;AAChBlB,IAAAA,MAAM,CAACC,IAAI,CAACC,IAAI,CAACgB,OAAO,CAAC,CAAA;AAC3B,GAAA;;AAEA;AACAG,EAAAA,SAASA,CAACH,OAAO,GAAG,EAAE,EAAE;AACtB,IAAA,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC,CAAA;AACxC,GAAA;AAEAG,EAAAA,SAASA,GAAG;IACVhB,QAAQ,CACLiB,gBAAgB,CAAE,CAAA,+BAAA,CAAgC,CAAC,CACnDC,OAAO,CAAEC,EAAE,IAAK;AACfA,MAAAA,EAAE,CAACC,aAAa,EAAEC,WAAW,CAACF,EAAE,CAAC,CAAA;AACnC,KAAC,CAAC,CAAA;IAEJ,OAAOzB,MAAM,CAACC,IAAI,CAAA;AACpB,GAAA;AACF;;;;"}